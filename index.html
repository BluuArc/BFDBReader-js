<!DOCTYPE html>
<html lang="en">
	<head>

		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

		<meta name="description" content="">
		<meta name="author" content="">
		<link rel="icon" href="">

		<title>BFDB Reader (js)</title>

		<!-- Bootstrap core CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">

		<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
		<link href="css/ie10-viewport-bug-workaround.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href="home.css" rel="stylesheet"> 

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

		<script type="text/javascript" src="js/bacc-page.js"></script>

		<script type="text/javascript" src="db-reader.js"></script>

		<script src="marked.js"></script>

	</head>
	<body>
		<script>
			printHeader("Projects");
		</script>

		<div class="container">
			<div class="content">
				<div class="boxed-content-main">
	 				<!-- Source for FileReader example: http://stackoverflow.com/questions/3582671/how-to-open-a-local-disk-file-with-javascript -->
					<h1 style="text-align: left;">BFDBReader-js</h1>

					<!-- file input area -->
					<div class="boxed-content-sub">
						<ul class="nav nav-tabs">
								<li class="active"><a data-toggle="tab" href="#auto-input">Automatic</a></li>
								<li><a data-toggle="tab" href="#manual-input">Manual</a></li>
								<li><a data-toggle="tab" href="#readme-tab" id="clickable-readme-tab">Readme</a></li>
						</ul>

						<div class="tab-content">
							<div id="auto-input" class="tab-pane fade in active">
								<div class="boxed-content-sub2">
									Server: 
									<select id="server-name">
										<option>Global</option>
										<option>Japan</option>
										<option>Europe</option>
										<option>Sample (quick)</option>
									</select>
									<button id="server-url-button" onclick="loadURL()">Load URLs</button>
									<button id="sample-button" onclick="loadFiles()" disabled="disable">Load Files</button>
									<br>
									Info JSON: <a id="server-info-url" target="_blank"></a><br>
									SP/feskills JSON: <a id="server-skill-url" target="_blank"></a><br>

									Loading these files will take some time due to their size, so please be patient and do not exit the page while they're loading. Refer to the status messages below for the current progress.
									<br>
									<button id="status-refresh" style="margin-bottom: 10px; margin-top: 10px; display: none;" onclick="fileLoadedFunction()">Refresh Status</button>
								</div>
							</div>
							<div id="manual-input" class="tab-pane fade">
								<div class="boxed-content-sub2">
									Info JSON: <input type="file" id="file-input" />
								 	SP/feskills JSON: <input type="file" id="sp-input" />
								 	<a href="https://github.com/Deathmax/bravefrontier_data/" target="_blank">Don't have any files? Choose an info.json and feskills.json here.</a>
							 	</div>
							</div>
							<div id="readme-tab" class="tab-pane fade">
								<div class="boxed-content-sub2" id="readme-contents">
									Readme info is here.
								</div>
							</div>
						</div>
					 	<button id="parse-button" disabled="disable" style="margin-bottom: 10px; margin-top: 10px; display: none;">Parse File(s)</button>
						<br>
					 	<pre id="status">Status: Waiting for file(s) to be chosen. <br>Choose your files using the 'Automatic' or 'Manual' tabs above.</pre>

						<input type="text" id="search-box" onkeyup="searchList()" title="Search for units here, and the dropdown on the right will update with results. To reset the dropdown, clear the contents of this text box." disabled="disable">
						<select id="unit-names">
							<option>Please pick a JSON file to use.</option>
						</select>

						<button id="print-button" disabled="disable">Print Info</button>

					</div>

					<!--Unit area-->
					<div class="boxed-content-sub">
						<h3>Unit Info:</h3>
						<ul class="nav nav-tabs">
							<li class="active"><a data-toggle="tab" href="#formatted-md-tab">Formatted</a></li>
							<li><a data-toggle="tab" href="#markdown">Markdown</a></li>
							<li><a data-toggle="tab" href="#html">HTML</a></li>
							<li><a data-toggle="tab" href="#json">JSON</a></li>
							<li><a data-toggle="tab" href="#unit-art">Unit Art</a></li>
							<li><a data-toggle="tab" href="#unit-links">Related Links</a></li>
						</ul>

						<div class="tab-content">
							<div id="formatted-md-tab" class="tab-pane fade in active" style="overflow-x: scroll;">
								<div class="boxed-content-sub2">
									<div id="formatted-md" style="padding: 10px">
Formatted unit info will be output here.
									</div>
								</div>
								Markdown converted to HTML with <a href="https://github.com/chjj/marked/" target="_blank">marked</a>.
							</div>
							<div id="markdown" class="tab-pane fade">
						    	<textarea readonly rows="10" cols="100" id="unit-info">Unit info will be output here.</textarea>
							</div>
							<div id="html" class="tab-pane fade">
						    	<textarea readonly rows="10" cols="100" id="unit-info-html">Unit info will be output here.</textarea>
							</div>
						    <div id="json" class="tab-pane fade">
								<textarea readonly rows="10" cols="100" id="unit-info-raw">Raw JSON data of unit info will be output here.</textarea>
						    </div>
						    <div id="unit-art" class="tab-pane fade">
						    	<div class="boxed-content-sub2">
						    		<img src="" alt="unit-full-img" id="unit-full-img" style="display: block; margin: auto; text-align: center; max-height: 100%; max-width: 100%;">
						    		<p style="text-align: center;">All Brave Frontier images are owned by Gumi.</p>
						    	</div>
						    </div>
						    <div id="unit-links" class="tab-pane fade">
						    	<div class="boxed-content-sub2">
						    		<a href="https://markdowntohtml.com/#converter" target="_blank">Markdown to HTML Converter</a><br>
						    		<a href="https://jsonformatter.curiousconcept.com/" target="_blank">JSON formatter</a>
						    	</div>
						    </div>
					  	</div>		
				  	</div>
					
					<!--file area-->
				  	<div class="boxed-content-sub">
						<h3>File Contents:</h3>
						<ul class="nav nav-tabs">
							<li class="active"><a data-toggle="tab" href="#info-tab">Info JSON</a></li>
							<li><a data-toggle="tab" href="#feskills-tab">SP JSON</a></li>
						</ul>

						<div class="tab-content">
							<div id="info-tab" class="tab-pane fade in active">
								<textarea readonly rows="10" cols="100" id="file-content">Info input from file will be output here.</textarea>
							</div>
							<div id="feskills-tab" class="tab-pane fade">
								<textarea readonly rows="10" cols="100" id="sp-content">SP input from file will be output here.</textarea>
							</div>
						</div>
					</div>
					<br>
				</div>
			</div>
		</div><!-- /.container -->

		<div id="temp" style="display: none;"></div>
		<script type="text/javascript">
			loadFile("https://bluuarc.github.io/BFDBReader-js/README.md", "temp");
			document.getElementById("clickable-readme-tab").addEventListener('click', function(){ document.getElementById("readme-contents").innerHTML = marked(document.getElementById("temp").innerHTML)});

			//manual file input
			document.getElementById('file-input').addEventListener('change', readInfoFile, false);
			document.getElementById('sp-input').addEventListener('change', readSkillsFile, false);

			//unit input
			document.getElementById("print-button").addEventListener('click', function(){printUnitClick(); document.getElementById("formatted-md").innerHTML = marked(document.getElementById("unit-info").innerHTML); document.getElementById("unit-info-html").innerHTML = document.getElementById("formatted-md").innerHTML;});
			document.getElementById("parse-button").addEventListener('click', displayContents);

			//file output
			document.getElementById('file-content').addEventListener('change', fileLoadedFunction, false);
			document.getElementById('sp-content').addEventListener('change', fileLoadedFunction, false);
		</script>

		<script>
			printFooter();
		</script>
	</body>
</html>